# Debug Mode 指令

針對難以重現或複雜的錯誤，使用系統化的除錯方法。

## 適用場景

- 能重現但無法找出原因的錯誤
- 資源競爭（race condition）和時間相關問題
- 效能問題和記憶體洩漏
- 曾經可以運作、後來壞掉的回歸錯誤

## Debug 流程

1. **問題描述**
   - 詳細描述問題現象
   - 提供重現步驟
   - 說明預期行為和實際行為

2. **產生假設**
   - Agent 會產生多個關於問題可能出處的假設
   - 列出可能的根本原因

3. **加入監測**
   - 在關鍵位置加入日誌語句（console.log, logger）
   - 記錄變數狀態、函式執行流程
   - 追蹤異步操作的執行順序

4. **收集資料**
   - 執行應用程式並重現錯誤
   - 收集執行階段的日誌輸出
   - 記錄錯誤發生的時間點和上下文

5. **分析資料**
   - 分析實際行為與預期行為的差異
   - 找出問題的根本原因
   - 確認或排除假設

6. **針對性修復**
   - 根據證據進行精準修復
   - 移除臨時的除錯程式碼
   - 驗證修復是否解決問題

## 執行方式

在 Agent 聊天框輸入 `/debug` 並描述問題，例如：
```
/debug 遊戲房間在玩家離開後狀態沒有正確更新，導致其他玩家看到錯誤的玩家列表
```

## 注意事項

- 提供越詳細的重現步驟，除錯效果越好
- 除錯完成後記得移除臨時的日誌語句
- 如果問題涉及多個檔案，使用 `@` 標記相關檔案
