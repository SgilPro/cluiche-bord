# 測試與修復指令

執行測試套件，分析失敗的測試，並自動修復問題。

## 執行步驟

1. **執行測試**
   - 先執行全域測試套件：`npm test` 或 `npm run test`
   - 如果沒有測試腳本，檢查是否有測試檔案（`*.test.ts`, `*.spec.ts`）

2. **分析失敗測試**
   - 擷取終端機輸出
   - 識別失敗的測試項目
   - 分析錯誤訊息和堆疊追蹤

3. **優先順序**
   - 優先修正最嚴重的邏輯錯誤
   - 其次修正型別錯誤
   - 最後修正風格和格式問題

4. **修復策略**
   - 針對每個失敗的測試，分析根本原因
   - 修正程式碼而非修改測試（除非測試本身有誤）
   - 確保修復後不會破壞其他測試

5. **驗證修復**
   - 重新執行單一失敗的測試確認通過
   - 執行完整測試套件確保沒有回歸
   - 執行 lint 檢查確保程式碼品質

## 執行方式

在 Agent 聊天框輸入 `/test-fix`，Agent 會自動執行測試並修復問題。

## 注意事項

- 如果專案沒有測試框架，先建議建立測試基礎設施
- 修復時保持測試的意圖和覆蓋範圍
- 不要為了通過測試而降低測試品質
